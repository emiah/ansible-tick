---
- name: Setup Telegraf
  docker_container:
    name: telegraf
    image: telegraf:1.3
    state: present
    restart: yes
    links:
      - "influxdb:influxdb"
    volumes:
      - /home/{{remote_user}}/telegraf.conf:/etc/telegraf/telegraf.conf
      - /var/run/docker.sock:/var/run/docker.sock

- name: Setup InfluxDB
  docker_container:
    name: influxdb
    image: influxdb:1.2
    state: present
    restart: yes
    ports:
      - "8083:8083"
      - "8086:8086"

- name: Setup Chronograf
  docker_container:
    name: chronograf
    image: chronograf:1.3
    state: present
    restart: yes
    ports:
      - "8888:8888"
    links:
      - "influxdb:influxdb"

- name: Setup Kapacitor
  docker_container:
    name: kapacitor
    image: kapacitor:1.2
    state: present
    restart: yes
    volumes:
      - /home/{{remote_user}}/kapacitor.conf:/etc/kapacitor/kapacitor.conf
